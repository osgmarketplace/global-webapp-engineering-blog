<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/global-webapp-engineering-blog/rss.xml" title="OBFnS Engineering Blog Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/global-webapp-engineering-blog/atom.xml" title="OBFnS Engineering Blog Blog Atom Feed"><title data-react-helmet="true">React FAQ | OBFnS Engineering Blog</title><meta data-react-helmet="true" property="og:title" content="React FAQ | OBFnS Engineering Blog"><meta data-react-helmet="true" name="description" content="Some basics and helpful information not always shared amongst frontend devs using React"><meta data-react-helmet="true" property="og:description" content="Some basics and helpful information not always shared amongst frontend devs using React"><meta data-react-helmet="true" property="og:url" content="https://obfns.github.io/global-webapp-engineering-blog//global-webapp-engineering-blog/2021/08/26/react-faq"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:image" content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"><meta data-react-helmet="true" name="twitter:image" content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xMS41IC0xMC4yMzE3NCAyMyAyMC40NjM0OCI+CiAgPHRpdGxlPlJlYWN0IExvZ288L3RpdGxlPgogIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIyLjA1IiBmaWxsPSIjNjFkYWZiIi8+CiAgPGcgc3Ryb2tlPSIjNjFkYWZiIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIi8+CiAgICA8ZWxsaXBzZSByeD0iMTEiIHJ5PSI0LjIiIHRyYW5zZm9ybT0icm90YXRlKDYwKSIvPgogICAgPGVsbGlwc2Ugcng9IjExIiByeT0iNC4yIiB0cmFuc2Zvcm09InJvdGF0ZSgxMjApIi8+CiAgPC9nPgo8L3N2Zz4K"><link data-react-helmet="true" rel="shortcut icon" href="/global-webapp-engineering-blog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://obfns.github.io/global-webapp-engineering-blog//global-webapp-engineering-blog/2021/08/26/react-faq"><link data-react-helmet="true" rel="alternate" href="https://obfns.github.io/global-webapp-engineering-blog//global-webapp-engineering-blog/2021/08/26/react-faq" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://obfns.github.io/global-webapp-engineering-blog//global-webapp-engineering-blog/2021/08/26/react-faq" hreflang="x-default"><link rel="stylesheet" href="/global-webapp-engineering-blog/assets/css/styles.52163555.css">
<link rel="preload" href="/global-webapp-engineering-blog/assets/js/runtime~main.6c347c99.js" as="script">
<link rel="preload" href="/global-webapp-engineering-blog/assets/js/main.36dc08e2.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/global-webapp-engineering-blog/"><img src="/global-webapp-engineering-blog/img/logo.svg" alt="OBFnS Engineering" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/global-webapp-engineering-blog/img/logo.svg" alt="OBFnS Engineering" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">OBFnS Engineering Blog</b></a><a class="navbar__item navbar__link" href="/global-webapp-engineering-blog/tags/help">Help</a><a class="navbar__item navbar__link" href="/global-webapp-engineering-blog/tags/react">React</a><a class="navbar__item navbar__link" href="/global-webapp-engineering-blog/tags">All Tags</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/global-webapp-engineering-blog/2021/08/26/react-faq">React FAQ</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/global-webapp-engineering-blog/">Introduction</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="blogPostTitle_GeHD">React FAQ</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2021-08-26T00:00:00.000Z">August 26, 2021</time> Â· 5 min read</div><div class="avatar margin-vert--md"><a href="https://github.com/dkershner6" target="_blank" rel="noopener noreferrer" class="avatar__photo-link avatar__photo"><img src="https://avatars.githubusercontent.com/u/25798427?v=4" alt="Derek Kershner"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/dkershner6" target="_blank" rel="noopener noreferrer">Derek Kershner</a></div><small class="avatar__subtitle"></small></div></div></header><div class="markdown"><p>Categorized questions to help with some of the more advanced intracacies of React. When opinions, and not facts, are presented, it is noted.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="referential-equality"></a>Referential Equality<a class="hash-link" href="#referential-equality" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-what-is-referential-equality-how-is-it-different-from-other-equalities-and-why-is-it-important-in-react"></a>Q. What is referential equality, how is it different from other equalities, and why is it important in React?<a class="hash-link" href="#q-what-is-referential-equality-how-is-it-different-from-other-equalities-and-why-is-it-important-in-react" title="Direct link to heading">#</a></h4><ul><li>Referential equality means the object maintains, as opposed to creates anew, a reference through whatever actions are occurring.</li><li>Strict equality in Javascript, or ===, uses EXACT equality for primitives (&#x27;string&#x27; === &#x27;string&#x27;), or REFERENTIAL equality for objects/arrays ([1,2,3] !== [1,2,3]). React uses this exact same logic to determine if something changed.</li><li>&quot;Something changed&quot; is the most important concept in React (hence the name). When something changes within a component, that component re-renders.<ul><li>The most dangerous situation you can encounter is when something creates a render loop. This is when &quot;something changed&quot; causes another change in an infinite cycle. (see Dependency Array section for defense of this)</li></ul></li><li>React has various tools to control referential equality built in. (See the useMemo / useCallback section for more details)</li><li>&quot;Render safety&quot;, a phrase I made up, is shorthand for &quot;correctly handles referential equality so that all downstream components can rely on the output&quot;.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-hooks"></a>React Hooks<a class="hash-link" href="#react-hooks" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="custom-react-hooks"></a>Custom React Hooks<a class="hash-link" href="#custom-react-hooks" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-how-should-i-think-about-custom-react-hooks-in-general"></a>Q. How should I think about custom React hooks in general?<a class="hash-link" href="#q-how-should-i-think-about-custom-react-hooks-in-general" title="Direct link to heading">#</a></h4><ul><li>Hooks are 100% identical to functions aside from one fact: they can also access the native react hooks (useState, useMemo, etc).</li><li>Because of this, they are also tested differently.</li><li>You should use custom hooks in the exact same way you would use functions that you call inside other functions (naming, easier understanding, encapsulation, reuse, etc). Feel free to nest several, or put a couple in a file with only one &quot;public&quot; one.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-should-i-use-a-custom-hook-or-should-i-build-a-context"></a>Q. Should I use a custom hook or should I build a Context?<a class="hash-link" href="#q-should-i-use-a-custom-hook-or-should-i-build-a-context" title="Direct link to heading">#</a></h4><ul><li>This question should be answered identically to &quot;Should I build a context, or should I just do things inside my component?&quot;<ul><li>(Personal Opinion) If you plan on needing these items more than 3 components down (prop drill), use a context.</li><li>If you need these items widely in a horizontal fashion (one component has no common parent to the other), use a context.</li><li>In all other situations, use hook(s).</li><li>A hook is easier to convert to a Context than vice-versa.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-hook-dependency-arrays"></a>React Hook Dependency Arrays<a class="hash-link" href="#react-hook-dependency-arrays" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-why-am-i-forced-to-populate-dependency-arrays-when-fill-in-the-blank-works-as-well-exhaustive-dependencies-eslint-rule"></a>Q. Why am I forced to populate dependency arrays when [fill in the blank] works as well? (Exhaustive Dependencies ESLint Rule)<a class="hash-link" href="#q-why-am-i-forced-to-populate-dependency-arrays-when-fill-in-the-blank-works-as-well-exhaustive-dependencies-eslint-rule" title="Direct link to heading">#</a></h4><ul><li>Kent C. Dodds says it well in <a href="https://kentcdodds.com/blog/react-hooks-pitfalls#pitfall-2-not-using-or-ignoring-the-eslint-plugin" target="_blank" rel="noopener noreferrer">Pitfall 2</a>.</li><li>Basically, even though something works well right now, doesn&#x27;t mean it is future-proof. Placing every dependency into the array future-proofs it.</li><li>If you are finding that adding to the array has changed how it works, add conditionals until it runs how it should.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-what-about-a-blank-dependency-array-i-only-want-it-to-run-initially-so-im-good-there-right"></a>Q. What about a blank dependency array, I only want it to run initially, so I&#x27;m good there, right?<a class="hash-link" href="#q-what-about-a-blank-dependency-array-i-only-want-it-to-run-initially-so-im-good-there-right" title="Direct link to heading">#</a></h4><ul><li>A blank dependency array (when you have actual dependencies, not always the case) shares all the same downsides as a limited dependency array. Works today, maybe not tomorrow.</li><li>The solution is the same, add a conditional. If you have no condition easily available to determine &quot;initial&quot;, create one and then change it once you have ran your condition.</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">const [isInitialRender, setIsInitialRender] = useState(true);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usememo--usecallback"></a>useMemo / useCallback<a class="hash-link" href="#usememo--usecallback" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-when-should-i-usememo-and-when-should-i-useeffect--usestate"></a>Q. When should I useMemo and when should I useEffect + useState?<a class="hash-link" href="#q-when-should-i-usememo-and-when-should-i-useeffect--usestate" title="Direct link to heading">#</a></h4><ul><li>useMemo (or possibly just creating an object) is nearly always the answer. useMemo performs better than useState + useEffect at 1 render per use.<ul><li>If you are downstream from useQuery, nearly always useMemo. react-query&#x27;s queryCache is your state.</li><li>If you are downstream from state you control, useMemo.</li></ul></li><li>If you are in a situation where you are creating data from a non-api-call, and you are the source of truth, this is a great use case for useEffect + useState. (~1% of the time)</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-i-read-an-article-telling-me-not-to-usememo-are-they-right"></a>Q. I read an article telling me not to useMemo, are they right?<a class="hash-link" href="#q-i-read-an-article-telling-me-not-to-usememo-are-they-right" title="Direct link to heading">#</a></h4><ul><li>Generally these fall into a few categories.<ul><li>The article is actually about React.memo and useMemo got thrown in somehow. React.memo is the FunctionComponent equivalent of PureFunction and should be used sparingly.</li><li>The article is written by someone who is managing an extremely mature, stable React environment, and every performance profiling millisecond counts. If we ever get to this point, I will revise this answer, but it is unlikely. For us, we should value safety to not infinite loop over a few milliseconds.<ul><li><a href="https://kentcdodds.com/blog/usememo-and-usecallback" target="_blank" rel="noopener noreferrer">Kent C. Dodds getting into the minutia of exactly when and how</a>, for those who are interested in 100% maximization.</li></ul></li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="q-do-i-need-to-wrap-fill-in-the-blank-in-a-hook-or-can-i-just-create-a-non-wrapped-same-fill-in-the-blank-usecallback-for-functions-usememo-for-objects"></a>Q. Do I need to wrap [fill in the blank] in a hook, or can I just create a [non-wrapped same fill in the blank]? (useCallback for functions, useMemo for objects)<a class="hash-link" href="#q-do-i-need-to-wrap-fill-in-the-blank-in-a-hook-or-can-i-just-create-a-non-wrapped-same-fill-in-the-blank-usecallback-for-functions-usememo-for-objects" title="Direct link to heading">#</a></h4><ul><li>These hooks are tools to maintain or break referential equality when you desire. If you do not wrap, a new version (breaking referential equality) is created every render.</li><li>This answer is heavily dependent on where you are in the render tree.<ul><li>If you are in the child-most component of your domain, you definitely DO NOT need to wrap anything in a hook. There is nothing downstream from you at risk.</li><li>If you are in a global context, you definitely almost always DO need to wrap everything in a hook. There are untold amounts of downstream resources expecting you to handle this well.</li><li>If you are in between, use your discretion, but when it doubt, wrap it.</li></ul></li><li>(useMemo specific) This can also depend on what you RETURN from the useMemo. If it is a primitive (string, number, boolean), you DO NOT need to wrap in a useMemo unless the calculation is expensive.</li></ul></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><a class="margin-horiz--sm" href="/global-webapp-engineering-blog/tags/react">react</a></div><div class="col margin-top--sm"><a href="https://github.com/obfns/global-webapp-engineering-blog/tree/main/blog/2021-08-26-react-faq.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/global-webapp-engineering-blog/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Introduction Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#referential-equality" class="table-of-contents__link">Referential Equality</a></li><li><a href="#react-hooks" class="table-of-contents__link">React Hooks</a><ul><li><a href="#custom-react-hooks" class="table-of-contents__link">Custom React Hooks</a></li><li><a href="#react-hook-dependency-arrays" class="table-of-contents__link">React Hook Dependency Arrays</a></li><li><a href="#usememo--usecallback" class="table-of-contents__link">useMemo / useCallback</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Resonance</div></div></div></footer></div>
<script src="/global-webapp-engineering-blog/assets/js/runtime~main.6c347c99.js"></script>
<script src="/global-webapp-engineering-blog/assets/js/main.36dc08e2.js"></script>
</body>
</html>